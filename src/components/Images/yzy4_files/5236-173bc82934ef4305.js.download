"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5236],{31388:function(e,n,i){i.d(n,{Z:function(){return StaticAddressForm_StaticAddressForm}});var t=i(52903),r=i(2784),a=i(64157),d=i(57078),l=i(77977),o=i(54158),s=i(20217),u=i(58943),c=i(36075);let GET_COUNTRY=async e=>{let{queryKey:n}=e,[,{countryCode:i}]=n;if(!c.Z)return;let{data:t}=await c.Z.get(`/api/shipping/countries/${i}`);return t};var useCountry_useCountry=e=>{let{data:n}=(0,u.a)(["country.by.id",{countryCode:null==e?void 0:e.toString().toLowerCase()}],GET_COUNTRY,{refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,enabled:!!e,select:e=>{var n;return{selectedCountry:null==e?void 0:e.Country,phoneticsEnabled:null==e?void 0:null===(n=e.Country)||void 0===n?void 0:n.phoneticsEnabled}}});return{...n}},m=i(13767),v=i(28535),p=i(74409),ChildPairFlipper_ChildPairFlipper=e=>{let{isReverseOrder:n,children:i}=e;return n?(0,t.BX)(t.HY,{children:[i[1],i[0]]}):(0,t.tZ)(t.HY,{children:i})},h=i(76368),g=i(96047),f=i(7328),y=i(60813),k=i(72779),C=i.n(k),N=i(3206),S=i(85573),b=i(13888),Names_Names=e=>{var n,i,r,a,d,l,o,s;let{firstNameError:u=!1,lastNameError:c=!1,phoneticsFirstNameError:m=!1,phoneticsLastNameError:v=!1,firstName:p,isReverseOrder:h,language:g,lastName:f,onChange:k,phoneticsError:Z,phoneticsFirstName:_,phoneticsLastName:F,phoneticsEnabled:A=!1,type:I,fontSize:E,isDisabled:T=!1}=e,{t:x}=(0,y.$G)();return(0,t.BX)(ChildPairFlipper_ChildPairFlipper,{isReverseOrder:h,children:[(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"firstName",hidden:!0,children:x("address_fields_first_name")}),(0,t.tZ)(S.I,{id:"firstName",name:"firstName",variant:"filled",sx:b.u,placeholder:x("address_fields_first_name"),value:p,onChange:e=>{var n;return k("firstName",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:u,isRequired:!0,my:1,fontSize:E,isDisabled:T}),(!!A||"ja"===g)&&(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"phoneticsFirstName",hidden:!0,children:x("address_fields_furigana_firstname")}),(0,t.tZ)(S.I,{id:"phoneticsFirstName",name:"phoneticsFirstName",placeholder:x("address_fields_furigana_firstname"),variant:"filled",sx:b.u,fontSize:E,value:_,onChange:e=>{var n;return k("phoneticsFirstName",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:"billing"===I&&(null==Z?void 0:null===(n=Z.billing)||void 0===n?void 0:n.phoneticsFirstName)||"shipping"===I&&(null==Z?void 0:null===(i=Z.shipping)||void 0===i?void 0:i.phoneticsFirstName)||m,isRequired:!0,className:C()({"phonetics-error":"billing"===I&&(null==Z?void 0:null===(r=Z.billing)||void 0===r?void 0:r.phoneticsFirstName)||"shipping"===I&&(null==Z?void 0:null===(a=Z.shipping)||void 0===a?void 0:a.phoneticsFirstName)}),isDisabled:T})]})]}),(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"lastName",hidden:!0,children:x("address_fields_last_name")}),(0,t.tZ)(S.I,{id:"lastName",name:"lastName",fontSize:E,placeholder:x("address_fields_last_name"),variant:"filled",value:f,sx:b.u,onChange:e=>{var n;return k("lastName",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:c,isRequired:!0,my:1,isDisabled:T}),(!!A||"ja"===g)&&(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"phoneticsLastName",hidden:!0,children:x("address_fields_furigana_lastname")}),(0,t.tZ)(S.I,{id:"phoneticsLastName",name:"phoneticsLastName",fontSize:E,sx:b.u,placeholder:x("address_fields_furigana_lastname"),variant:"filled",value:F,onChange:e=>{var n;return k("phoneticsLastName",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:"billing"===I&&(null==Z?void 0:null===(d=Z.billing)||void 0===d?void 0:d.phoneticsLastName)||"shipping"===I&&(null==Z?void 0:null===(l=Z.shipping)||void 0===l?void 0:l.phoneticsLastName)||v,isRequired:!0,className:C()({"phonetics-error":"billing"===I&&(null==Z?void 0:null===(o=Z.billing)||void 0===o?void 0:o.phoneticsLastName)||"shipping"===I&&(null==Z?void 0:null===(s=Z.shipping)||void 0===s?void 0:s.phoneticsLastName)}),isDisabled:T})]})]})]})},Z=i(73481),Country_Country=e=>{let{countries:n,countryCodeAlpha2:i,error:r,onChange:a,topCountries:d,fontSize:l,isDisabled:o=!1}=e,{t:s}=(0,y.$G)();return(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"countryCodeAlpha2",hidden:!0,children:s("address_fields_country")}),(0,t.BX)(Z.P,{id:"countryCodeAlpha2",name:"countryCodeAlpha2",value:i,placeholder:s("address_fields_country"),onChange:e=>{var n;return a("countryCodeAlpha2",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isRequired:!0,isInvalid:!!r,borderRadius:3,size:"lg",my:1,fontSize:l,sx:b.u,isDisabled:o,children:[(0,t.tZ)("option",{value:"",children:s("Select Country")},"-1"),d&&d.map(e=>(0,t.tZ)("option",{value:e.id,children:e.name},`${e.id}-top`)),(0,t.tZ)("option",{disabled:!0,children:"------"},"-2"),n&&n.map(e=>(0,t.tZ)("option",{value:e.id,children:e.name},`${e.id}-all`))]})]})},Address_Address=e=>{let{streetAddressError:n=!1,extendedAddressError:i=!1,localityError:r=!1,extendedAddress:a,isReverseOrder:d,locality:l,onChange:o,streetAddress:s,countryCode:u,fontSize:c,isDisabled:m=!1}=e,{t:v}=(0,y.$G)(),p=v("AU"===u?"address_fields_suburb":"address_fields_city");return(0,t.BX)(ChildPairFlipper_ChildPairFlipper,{isReverseOrder:d,children:[(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"streetAddress",hidden:!0,children:v("address_fields_address_1")}),(0,t.tZ)(S.I,{id:"streetAddress",name:"streetAddress",sx:b.u,fontSize:c,placeholder:v("address_fields_address_1"),variant:"filled",value:s,onChange:e=>{var n;return o("streetAddress",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:n,isRequired:!0,my:1,isDisabled:m}),(0,t.tZ)(N.l,{htmlFor:"extendedAddress",hidden:!0,children:v("address_fields_address_2")}),(0,t.tZ)(S.I,{id:"extendedAddress",name:"extendedAddress",fontSize:c,sx:b.u,placeholder:v("address_fields_address_2"),variant:"filled",value:a,onChange:e=>{var n;return o("extendedAddress",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:i,my:1,isDisabled:m})]}),(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"locality",hidden:!0,children:p}),(0,t.tZ)(S.I,{id:"locality",name:"locality",fontSize:c,sx:b.u,placeholder:p,variant:"filled",value:l,onChange:e=>{var n;return o("locality",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isRequired:!0,isInvalid:r,my:1,isDisabled:m})]})]})},_=i(38035),Regionality_Regionality=e=>{let n,{regionError:i=!1,postalCodeError:r=!1,includeZipCode:a,isReverseOrder:d,onChange:l,postalCode:o,region:s,selectedCountry:u,fontSize:c,isDisabled:m=!1}=e,{t:v}=(0,y.$G)(),p=(0,t.tZ)(N.l,{htmlFor:"region",hidden:!0,children:v("State/Province/Region")});return n=(null==u?void 0:u.Regions)?(0,t.BX)(t.HY,{children:[p,(0,t.tZ)(Z.P,{id:"region",name:"region",fontSize:c,placeholder:v("State/Province/Region"),value:s,onChange:e=>{var n;return l("region",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isRequired:!0,isInvalid:i,borderRadius:3,size:"lg",my:1,ml:d&&a?1:0,mr:d||!a?0:1,sx:b.u,isDisabled:m,children:u.Regions.map(e=>(0,t.tZ)("option",{value:e.code,children:e.name},e.id))})]}):(0,t.BX)(t.HY,{children:[p,(0,t.tZ)(S.I,{id:"region",name:"region",fontSize:c,placeholder:v("State/Province/Region"),variant:"filled",value:s,onChange:e=>{var n;return l("region",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:i,my:1,ml:d&&a?1:0,mr:d||!a?0:1,sx:b.u,isDisabled:m})]}),(0,t.tZ)(_.k,{justifyContent:"space-between",children:(0,t.BX)(ChildPairFlipper_ChildPairFlipper,{isReverseOrder:d,children:[n,a&&(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"postalCode",hidden:!0,children:v("address_fields_zip_postal")}),(0,t.tZ)(S.I,{id:"postalCode",name:"postalCode",fontSize:c,placeholder:v("address_fields_zip_postal"),variant:"filled",value:o,onChange:e=>{var n;return l("postalCode",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:r,isRequired:!0,my:1,ml:d||!a?0:1,mr:d&&a?1:0,sx:b.u,isDisabled:m})]})]})})},Telephone_Telephone=e=>{let{error:n,onChange:i,telephone:r,fontSize:a,isDisabled:d=!1}=e,{t:l}=(0,y.$G)();return(0,t.BX)(t.HY,{children:[(0,t.tZ)(N.l,{htmlFor:"telephone",hidden:!0,children:l("address_fields_phone_number")}),(0,t.tZ)(S.I,{id:"telephone",name:"telephone",type:"tel",fontSize:a,value:r,placeholder:l("address_fields_phone_number"),variant:"filled",onChange:e=>{var n;return i("telephone",null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)},isInvalid:!!n,isRequired:!0,my:1,sx:b.u,isDisabled:d})]})},F=i(51924),A=i(82108),I=i.n(A),isStaticAddressFieldInErrorState=(e,n,i)=>{var t,r;return"object"==typeof i&&(!!(null==i?void 0:null===(t=i.messages)||void 0===t?void 0:t[`${I()(e)}Address.${n}`])||!!(null==i?void 0:null===(r=i.messages)||void 0===r?void 0:r[n]))},StaticAddressForm_StaticAddressForm=e=>{var n,i,u,c;let{type:y,product:k,reportChange:C,title:N,error:S,isDisabled:b=!1,subtitle:Z,billingPersisted:_}=e,{shippingAddress:A}=(0,F.Z)(),{languageCode:I,region:E}=(0,f.Z)(),{billingAddress:T}=(0,a.v9)(e=>({billingAddress:(0,d.gs)(e)})),x=(0,h.Z)(g.Z.web_enable_vault_flip),B="shipping"===y?A:T,[V,R]=(0,r.useState)({firstName:"",lastName:"",streetAddress:"",extendedAddress:"",locality:"",region:"",telephone:"",...B,postalCode:(null==B?void 0:B.postalCode)||"",countryCodeAlpha2:(null==B?void 0:B.countryCodeAlpha2)||E||"",phoneticsFirstName:(null==B?void 0:null===(n=B.phonetics)||void 0===n?void 0:n.firstName)||"",phoneticsLastName:(null==B?void 0:null===(i=B.phonetics)||void 0===i?void 0:i.lastName)||""}),w=(0,l.Z)(),D=(null==w?void 0:null===(u=w.pathname)||void 0===u?void 0:u.includes("/buy"))||(null==w?void 0:null===(c=w.pathname)||void 0===c?void 0:c.includes("/settings"))?o.T.Buy:o.T.Sell,{allCountries:P,topCountries:L}=(0,s.Z)(D,null==k?void 0:k.productCategory),{phoneticsEnabled:z,selectedCountry:O}=useCountry_useCountry(V.countryCodeAlpha2);(0,r.useEffect)(()=>{C(V,y)},[V]),(0,r.useEffect)(()=>{if("billing"===y){var e,n;let i=_||T,t=b?A:i,r={firstName:"",lastName:"",streetAddress:"",extendedAddress:"",locality:"",region:"",telephone:"",...t,postalCode:(null==t?void 0:t.postalCode)||"",countryCodeAlpha2:(null==t?void 0:t.countryCodeAlpha2)||E||"",phoneticsFirstName:(null==t?void 0:null===(e=t.phonetics)||void 0===e?void 0:e.firstName)||"",phoneticsLastName:(null==t?void 0:null===(n=t.phonetics)||void 0===n?void 0:n.lastName)||""};R(r)}},[y,b,R,A,T]);let onFieldChange=(e,n)=>{"countryCodeAlpha2"===e?R({...V,region:"",[e]:n}):R({...V,[e]:"postalCode"===e||"telephone"===e?m.Z.convertFullToHalf(n):n})};return(0,t.BX)(v.xu,{mt:x?"5":"10","data-component":"address-form",children:[N&&(0,t.tZ)(p.X,{size:"xl",fontWeight:"600","data-component":"form-title",mb:2,children:N}),(0,t.tZ)(p.X,{as:"h3",fontSize:{base:"sm",md:"md"},mb:{base:"2",md:"6"},fontWeight:"400",children:Z}),(0,t.tZ)(Names_Names,{isReverseOrder:"ja"===I,firstNameError:isStaticAddressFieldInErrorState(y,"firstName",S),lastNameError:isStaticAddressFieldInErrorState(y,"lastName",S),phoneticsFirstNameError:isStaticAddressFieldInErrorState(y,"phonetics.firstName",S),phoneticsLastNameError:isStaticAddressFieldInErrorState(y,"phonetics.lastName",S),type:y,language:I,phoneticsEnabled:z,firstName:null==V?void 0:V.firstName,lastName:null==V?void 0:V.lastName,phoneticsFirstName:null==V?void 0:V.phoneticsFirstName,phoneticsLastName:null==V?void 0:V.phoneticsLastName,onChange:onFieldChange,fontSize:"md",isDisabled:b}),(0,t.tZ)(Country_Country,{error:isStaticAddressFieldInErrorState(y,"countryCodeAlpha2",S),countryCodeAlpha2:null==V?void 0:V.countryCodeAlpha2,topCountries:L,countries:P,onChange:onFieldChange,fontSize:"md",isDisabled:b}),(0,t.BX)(ChildPairFlipper_ChildPairFlipper,{isReverseOrder:"ja"===I,children:[(0,t.tZ)(Address_Address,{streetAddressError:isStaticAddressFieldInErrorState(y,"streetAddress",S),extendedAddressError:isStaticAddressFieldInErrorState(y,"extendedAddress",S),localityError:isStaticAddressFieldInErrorState(y,"locality",S),isReverseOrder:"ja"===I,streetAddress:null==V?void 0:V.streetAddress,extendedAddress:null==V?void 0:V.extendedAddress,locality:null==V?void 0:V.locality,countryCode:null==V?void 0:V.countryCodeAlpha2,onChange:onFieldChange,fontSize:"md",isDisabled:b}),(0,t.tZ)(Regionality_Regionality,{isReverseOrder:"ja"===I,includeZipCode:(null==V?void 0:V.countryCodeAlpha2)!=="HK",regionError:isStaticAddressFieldInErrorState(y,"region",S),postalCodeError:isStaticAddressFieldInErrorState(y,"postalCode",S),region:null==V?void 0:V.region,postalCode:null==V?void 0:V.postalCode,selectedCountry:O,onChange:onFieldChange,fontSize:"md",isDisabled:b})]}),(0,t.tZ)(Telephone_Telephone,{error:isStaticAddressFieldInErrorState(y,"telephone",S),onChange:onFieldChange,telephone:null==V?void 0:V.telephone,fontSize:"md",isDisabled:b})]})}},13888:function(e,n,i){i.d(n,{u:function(){return t}});let t={background:"neutral.white",borderRadius:"0px",fontSize:"md",_hover:{background:"neutral.white",borderColor:"neutral.600"},_focus:{background:"neutral.white",borderColor:"neutral.600"},borderColor:"neutral.300",_placeholder:{color:"neutral.400"}}},20217:function(e,n,i){i.d(n,{Z:function(){return useCountries_useCountries}});var t=i(58943),r=i(36075);let GET_COUNTRIES=async e=>{let{queryKey:n}=e,[,{context:i,vertical:t}]=n,{data:a}=await r.Z.get("/api/shipping/countries",{params:{format:"ranked",context:i,productCategory:t}});return a};var useCountries_useCountries=(e,n)=>{let{data:i,isLoading:r}=(0,t.a)(["chk.getCountries",{context:e,vertical:n}],GET_COUNTRIES,{enabled:!!e,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1,select:e=>{let n=(null==e?void 0:e.all)??[],i=(null==e?void 0:e.top)??[],t=n.filter(Boolean),r=i.filter(Boolean);return{allCountries:t,topCountries:r}}});return{...i,countriesLoading:r}}},77267:function(e,n,i){i.d(n,{Z:function(){return usePaymentInstruments}});var t=i(2784),r=i(78928),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PaymentInstruments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"countryCodes"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"currencyCode"}},type:{kind:"NamedType",name:{kind:"Name",value:"CurrencyCode"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"instrumentCategories"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paymentInstruments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"countryCodes"},value:{kind:"Variable",name:{kind:"Name",value:"countryCodes"}}},{kind:"Argument",name:{kind:"Name",value:"currencyCode"},value:{kind:"Variable",name:{kind:"Name",value:"currencyCode"}}},{kind:"Argument",name:{kind:"Name",value:"instrumentCategories"},value:{kind:"Variable",name:{kind:"Name",value:"instrumentCategories"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instrumentCategory"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CreditCardPaymentInstrument"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brands"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"provider"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LocalPaymentInstrument"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"countries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iso2"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"provider"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"key"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BraintreePaymentProvider"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"merchantAccountId"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:727,source:{body:"\n  query PaymentInstruments(\n    $countryCodes: [String!]\n    $currencyCode: CurrencyCode\n    $instrumentCategories: [String!]\n  ) {\n    paymentInstruments(\n      countryCodes: $countryCodes\n      currencyCode: $currencyCode\n      instrumentCategories: $instrumentCategories\n    ) {\n      instrumentCategory\n      ... on CreditCardPaymentInstrument {\n        name\n        key\n        brands\n        provider {\n          name\n          key\n        }\n      }\n      ... on LocalPaymentInstrument {\n        name\n        key\n        countries {\n          iso2\n        }\n        provider {\n          name\n          key\n          ... on BraintreePaymentProvider {\n            merchantAccountId\n          }\n        }\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},d=i(64157),l=i(51924),o=i(57078),s=i(7328),u=i(16443),usePaymentInstruments=function(){let{vaultTraceId:e,paymentInstruments:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{vaultTraceId:null,paymentInstruments:["lpm"]},i=(0,d.v9)(o.sG),{shippingAddress:c}=(0,l.Z)(),m=(null==c?void 0:c.countryCodeAlpha2)||"US",v=(0,u.Z)(),{countryCode:p}=(0,s.Z)(),[h,g]=(0,t.useState)(!1),f=(0,r.Z)(a,{variables:{countryCodes:[i,m,p],currencyCode:v,instrumentCategories:n},context:{headers:e?{"x-vault-trace-id":e}:{}},meta:{vaultTraceId:e},enabled:!h,onSuccess:()=>{(null==n?void 0:n.length)===1&&"credit_card"===n[0]&&g(!0)},select:e=>{let n=null==e?void 0:e.paymentInstruments,i=new Map;return i.set("lpm",{}),i.set("vpm",{}),i.set("credit_card",{}),null==n||n.forEach(e=>{var n,t,r,a;let d={},l=i.get(null==e?void 0:e.instrumentCategory);if(l&&e&&"key"in e&&(null==e?void 0:e.key)&&(null==e?void 0:e.key)in l){d[e.key]=i.get(null==e?void 0:e.instrumentCategory)[e.key];let t="countries"in e&&(null===(n=e.countries)||void 0===n?void 0:n.map(e=>null==e?void 0:e.iso2));t&&(d[e.key].countries=[...new Set(...d[e.key].countries,...t)]),i.set(e.instrumentCategory,{...i.get(e.instrumentCategory),...d})}e&&"key"in e&&e.key&&"countries"in e&&(d[e.key]={countries:null===(t=e.countries)||void 0===t?void 0:t.map(e=>null==e?void 0:e.iso2),name:e.name,key:e.key,merchantAccountId:e.provider&&"merchantAccountId"in e.provider?null===(r=e.provider)||void 0===r?void 0:r.merchantAccountId:null,paymentProvider:null===(a=e.provider)||void 0===a?void 0:a.key},i.set(e.instrumentCategory,{...i.get(e.instrumentCategory),...d}))}),i}}),y=f.data;return{...f,data:y}}},36802:function(e,n,i){i.d(n,{Z:function(){return useValidateBillingAddress_useValidateBillingAddress}});var t=i(17344);let r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ValidateBillingAddress"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ValidateBillingAddressInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validateBillingAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"areErrorsPresent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fieldName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fieldStringValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorCode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"errorDescription"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:261,source:{body:"\n  mutation ValidateBillingAddress($input: ValidateBillingAddressInput!) {\n    validateBillingAddress(input: $input) {\n      areErrorsPresent\n      errors {\n        fieldName\n        fieldStringValue\n        errorCode\n        errorDescription\n      }\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var useValidateBillingAddress_useValidateBillingAddress=()=>{let{mutatefn:e}=(0,t.Z)(r);return{mutatefn:e}}},40797:function(e,n,i){var t=i(64157),r=i(51924),a=i(57078),d=i(55830),l=i(16443),o=i(7328);n.Z=e=>{var n,i,s;let u=(0,t.v9)(a.sG),{shippingAddress:c}=(0,r.Z)(),m=(null==c?void 0:c.countryCodeAlpha2)||"US",v=(0,l.Z)(),{countryCode:p}=(0,o.Z)(),h=(0,d.NL)(),g=h.getQueryCache().findAll(["PaymentInstruments",{variables:{countryCodes:[u,m,p],currencyCode:v,instrumentCategories:["credit_card"]}}]);return e??(null===(s=g[0])||void 0===s?void 0:null===(i=s.meta)||void 0===i?void 0:null===(n=i.vaultTraceId)||void 0===n?void 0:n.toString())}},20329:function(e,n,i){var t=i(77977),r=i(668);n.Z=()=>{var e,n;let i=(0,t.Z)(),a=null==i?void 0:null===(e=i.pathname)||void 0===e?void 0:e.includes("/settings");return{isSettingsFlow:a,flowName:(null==i?void 0:null===(n=i.pathname)||void 0===n?void 0:n.includes("/seller"))?r.Z.SELLER_SETTINGS:r.Z.BUYER_SETTINGS}}},95098:function(e,n,i){i.d(n,{Z:function(){return useVaultingInitiation_useVaultingInitiation}});var t=i(2784),r=i(31601),a=i(61165),d=i(17344),l=i(76368),o=i(96047);let s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartVaultingSession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"startVaultingSessionInput"}},type:{kind:"NamedType",name:{kind:"Name",value:"StartVaultingSessionInput"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startVaultingSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"startVaultingSessionInput"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isThreeDsEnabled"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"provider"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"brands"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:230,source:{body:"\n  mutation StartVaultingSession(\n    $startVaultingSessionInput: StartVaultingSessionInput\n  ) {\n    startVaultingSession(input: $startVaultingSessionInput) {\n      id\n      isThreeDsEnabled\n      provider\n      brands\n    }\n  }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}};var useVaultingInitiation_useVaultingInitiation=e=>{let{paymentInstrument:n,provider:i=null}=e,u=(0,r.Z)(),c=(0,a.Z)(),m=null==c?void 0:c.defaultCurrency,{mutatefn:v}=(0,d.Z)(s),p=(0,l.Z)(o.Z.web_enable_vault_flip),h=(0,t.useCallback)(async(e,t)=>{let r=i||"braintree",a=p&&t?t:u,d={startVaultingSessionInput:{countryCode:a,currencyCode:m,instrumentKey:null==n?void 0:n.toLowerCase(),...!p||(null==n?void 0:n.toLowerCase())==="paypal"&&p?{providerKey:r}:{}}},l=await v(d,{context:{headers:{"x-vault-trace-id":e}}});return l},[i,u,m,n]);return{fetchVaultingSession:h}}},1312:function(e,n,i){var t=i(52903),r=i(2784);n.Z=e=>{let{children:n,condition:i}=e,a=r.Children.toArray(n);return a.length?(0,t.tZ)(t.HY,{children:i?a[0]:a[1]||null}):(0,t.tZ)(t.HY,{})}},64389:function(e,n,i){i.d(n,{Z:function(){return FormError_FormError}});var t=i(52903),r=i(2784),a=i(12007),d=i(49820),l=i(63409),o=i(96047),s=i(76368),u=i(17010),c=i(29236),m=i(28535),v=i(38035),p=i(77533),h=i(36474),g=i(7328),f=i(1312),y=i(25753),k=i(97010),FormError_FormErrorAdditionalMessages=e=>{let{messages:n}=e;return(0,t.tZ)(y.s,{m:0,pl:8,"data-testid":"form-error-additional-messages",children:n.map(e=>(0,t.tZ)(k.HC,{"data-testid":"form-error-additional-messages-item",children:(0,t.tZ)(p.x,{as:"span",children:e})},e))})};let C={my:4,mx:0,padding:5,fontWeight:600,bg:"neutral.300",color:"neutral.500",borderWidth:"1px",borderColor:"neutral.500",borderStyle:"solid"},N={...C,bg:"red.100",borderColor:["none","red.300"],borderWidth:[0,"2px"]},S={...N,borderColor:["none","red.700"],fontSize:"4"},getVariantStyles=e=>{switch(e){case"warning":return N;case"spc-warning":return S;default:return C}};var FormError_FormError=e=>{let{error:n,showIcon:i,trackError:y,screen:k,variant:C}=e,N=(0,a.Z)(),S=(0,s.Z)(o.Z.ab_riskified_error_web),b=(0,s.Z)(o.Z.ab_modify_billing_error_web),{languageCode:Z}=(0,g.Z)(),_=(0,r.useMemo)(()=>{if(!n)return null;if("object"==typeof n){let{description:e,error:i,discount_error:t,message:r}=n;return e||i||t||r||JSON.stringify(n)}return n},[n]),F=(0,r.useMemo)(()=>{if("There was an issue verifying your payment method or billing address. Please double check all payment and address information and try again."===_&&"en"===Z){if("true"===b)return N(d.EVENTS.CardVerificationError,l.a.BuyingBilling,"Card verification failed - Please confirm your billing and credit card information match and try again"),"Card verification failed - Please confirm your billing and credit or debit card information match and try again";"false"===b&&N(d.EVENTS.CardVerificationError,l.a.BuyingBilling,_)}return _},[_,b,Z,N]),A=(0,r.useMemo)(()=>n&&"object"==typeof n&&n.messages?Object.values(n.messages).reduce((e,n)=>Array.isArray(n)&&n.length?[...e,...n]:e,[]):null,[n]);(0,r.useEffect)(()=>{window.scrollTo({left:0,top:0,behavior:"smooth"})},[n]),(0,r.useEffect)(()=>{y&&_&&N(d.EVENTS.CheckoutError,k,_)},[_]),(0,r.useEffect)(()=>{(null==_?void 0:_.startsWith("We were unable to accept your Bid. To try again, please follow these simple steps to verify details regarding your payment information. To get started, click"))&&N(d.EVENTS.RiskifiedClickHereErrorDisplayed,l.a.Buying)},[_]);let I=(0,r.useCallback)(e=>{let n=e.target.closest("a");n&&e.currentTarget.contains(n)&&(null==_?void 0:_.startsWith("We were unable to accept your Bid. To try again, please follow these simple steps to verify details regarding your payment information. To get started, click"))&&N(d.EVENTS.RiskifiedClickHereInteraction,l.a.Buying)},[N,_]);return(0,t.tZ)(f.Z,{condition:!!F,children:(0,t.BX)(m.xu,{sx:getVariantStyles(C),"data-testid":"form-error-wrapper",children:[(0,t.BX)(v.k,{children:[(0,t.tZ)(p.x,{as:"div",fontSize:"lg",margin:0,fontWeight:"bold",overflow:"auto",children:(0,t.BX)(f.Z,{condition:"true"===S,children:[(0,t.tZ)(u.T,{as:"div",sx:{"> a":{color:"green.700",textDecoration:"underline",fontWeight:"bold"}},html:F||"",onClick:I}),(0,t.tZ)(u.T,{as:"div",html:F||"",onClick:I})]})}),(0,t.tZ)(h.L,{}),i&&(0,t.tZ)(m.xu,{mt:.5,ml:1,children:(0,t.tZ)(c.w,{"data-testid":"form-error-icon",boxSize:6})})]}),A&&(0,t.tZ)(FormError_FormErrorAdditionalMessages,{messages:A})]})})}},82884:function(e,n,i){var t=i(52903);i(2784);var r=i(28535),a=i(60843),d=i(38035);n.Z=()=>(0,t.BX)(r.xu,{mt:"10",fontWeight:"600","data-component":"placeholder-credit-card-form","data-testid":"ccPlaceForm",children:[(0,t.tZ)(a.l,{width:"100%",height:"3rem",mt:"1.5rem"}),(0,t.BX)(d.k,{mt:5,children:[(0,t.tZ)(r.xu,{mr:"1.5rem",width:"30%",children:(0,t.tZ)(a.l,{width:"100%",height:"3rem"})}),(0,t.tZ)(r.xu,{mr:"1.5rem",width:"30%",children:(0,t.tZ)(a.l,{width:"100%",height:"3rem"})})]})]})},72190:function(e,n,i){i.d(n,{Z:function(){return CreditCardForm_CreditCardForm}});var t=i(52903),r=i(2784),a=i(60813),d=i(28535),l=i(74409),o=i(95611),s=i(82884),u=i(27259);let c=(0,u.Z)(()=>Promise.all([i.e(8727),i.e(4867),i.e(1031),i.e(3723),i.e(9670),i.e(2669)]).then(i.bind(i,99318)),{fallback:(0,t.tZ)(s.Z,{}),ssr:!1}),m=(0,u.Z)(()=>Promise.all([i.e(7502),i.e(6931),i.e(5482),i.e(9648)]).then(i.bind(i,41514)),{fallback:(0,t.tZ)(s.Z,{}),ssr:!1});var CreditCardForm_CreditCardForm=e=>{let{context:n,pspInstanceRef:i,provider:u,brands:v,enteredCountry:p}=e,{t:h}=(0,a.$G)(),[g,f]=(0,r.useState)(null);return(0,r.useEffect)(()=>{u&&f(u.toLowerCase())},[u,f]),(0,t.BX)(d.xu,{mt:"10",fontWeight:"600","data-component":"credit-card-form",children:[(0,t.tZ)(l.X,{size:"xl",fontWeight:"600","data-component":"form-title",mb:5,children:h("Credit Card")}),(0,t.tZ)(d.xu,{children:g?g===o.h7.Braintree?(0,t.tZ)(m,{context:n,pspInstanceRef:i,enteredCountry:p}):(0,t.tZ)(c,{pspInstanceRef:i,brands:v}):(0,t.tZ)(s.Z,{})})]})}},98143:function(e,n,i){var t=i(45455),r=i.n(t),a=i(66292);n.Z=e=>!(!(!r()(e)&&(0,a.Z)({toCheck:e,optionalKeys:["error","moneySessionId","brand"],requiredKeys:["providerMeta"]}))||(null==e?void 0:e.error)||r()(e.providerMeta))},31016:function(e,n){n.Z=e=>{let n={extendedAddress:"streetAddress2",countryCodeAlpha2:"countryCode"},i=["market","phonetics","telephone"],t=Object.keys(n),r=Object.entries(e).reduce((e,r)=>{let[a,d]=r,l=t.includes(a)?n[a]:a;return i.includes(a)?e:{...e,[`${l}`]:d}},{});return r}},45738:function(e,n){let i={phone:"telephone",streetAddress2:"extendedAddress",countryCode:"countryCodeAlpha2"};n.Z=e=>{if(!e.messagesList)return null;let n=e.messagesList.reduce((e,n)=>{let t=n.fieldName,r=`${i[t]||t}`,a=n.errorDescription;return{messages:{...e.messages,[r]:[...e.messages[r]||[],a]}}},{messages:{}});return n}},84673:function(e,n){n.Z=e=>{if(!e)return;let{phoneticsFirstName:n,phoneticsLastName:i,phonetics:t,...r}=e;return"HK"===e.countryCodeAlpha2&&(r.postalCode="999077"),""===n||""===i?r.phonetics={firstName:n,lastName:i}:r.phonetics={firstName:n||(null==t?void 0:t.firstName)||"",lastName:i||(null==t?void 0:t.lastName)||""},r}}}]);